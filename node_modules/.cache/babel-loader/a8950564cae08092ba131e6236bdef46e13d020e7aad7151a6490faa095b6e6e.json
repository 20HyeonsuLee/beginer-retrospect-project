{"ast":null,"code":"var _jsxFileName = \"/Users/hyeonsulee/MyFolder/BCSD/ageofwar/src/components/turret/Turret.js\",\n  _s = $RefreshSig$();\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { styled } from \"styled-components\";\nimport targetImg from \"../../assets/images/turrets//target.png\";\nimport { selectedTower } from \"../../store/slices/selectedTurret\";\nimport { status } from \"../../store/slices/status\";\nimport { ally, fieldWidth } from \"../../utils/data/dataSet\";\nimport { useEffect, useRef } from \"react\";\nimport { rangeCheck } from \"../../utils/functions/isRange\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n    display: flex;\n    position: absolute;\n    align-items: center;\n    justify-content: center;\n    width: 55px;\n    height: 55px;\n    left: ${props => props.location.left};\n    bottom: ${props => props.location.bottom};\n    z-index: 3;\n`;\n_c = Container;\nconst TurretImage = styled.img`\n    position: absolute;\n    width: 140px;\n    height: 140px;\n    transform: rotate( ${props => props.deg + \"deg\"});\n`;\n_c2 = TurretImage;\nconst TargetImage = styled.img`\n    position: absolute;\n    width: 55px;\n    height: 55px;\n    z-index: 10;\n    &:hover{\n        background-color: rgba(240, 240, 240, 0.5);\n    }\n    display: ${props => {\n  if (props.menu === \"add\") {\n    if (props.towerInfo === null) return \"block\";else return \"none\";\n  } else if (props.menu === \"cell\") {\n    if (props.towerInfo !== null) return \"block\";else return \"none\";\n  } else {\n    return \"none\";\n  }\n}};\n`;\n_c3 = TargetImage;\nexport default function Turret({\n  location,\n  menu,\n  team,\n  turretInfo,\n  index\n}) {\n  _s();\n  const dispatch = useDispatch();\n  const selectedTurret = useSelector(state => state.selectedTurret);\n  const fieldUnits = useSelector(state => state.fieldUnit);\n  const turretRef = useRef(null);\n  useEffect(() => {\n    if (turretInfo !== null) {\n      const location = {\n        x: turretRef.current.offsetLeft,\n        y: turretRef.current.offsetTop,\n        left: turretRef.current.offsetLeft,\n        right: fieldWidth - turretRef.current.offsetLeft - turretRef.current.offsetWidth,\n        top: turretRef.current.offsetTop,\n        bottom: turretRef.current.offsetBottom,\n        centerX: turretRef.current.offsetLeft + turretRef.current.offsetWidth / 2\n      };\n      console.log(location);\n      if (rangeCheck(fieldUnits, {\n        id: null,\n        location: location\n      }, Number(!team), turretInfo.range) > -1) {\n        dispatch(status.actions.setMotion({\n          team: team,\n          index: index,\n          motion: \"공격\"\n        }));\n\n        // 공격일 때 투사체 발사해야하는데 투사체의 애니메이션 좌표를 어떻게 줄것인가....\n        // \n      } else {\n        dispatch(status.actions.setMotion({\n          team: team,\n          index: index,\n          motion: \"대기\"\n        }));\n      }\n    }\n  }, [fieldUnits]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    ref: turretRef,\n    location: location,\n    children: [turretInfo !== null && turretInfo !== undefined ? /*#__PURE__*/_jsxDEV(TurretImage, {\n      src: require(\"../../assets/images/turrets/level\" + turretInfo.level + \"/turret\" + turretInfo.turret + \"/\" + turretInfo.attackMotion + \".gif\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 64\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 237\n    }, this), /*#__PURE__*/_jsxDEV(TargetImage, {\n      src: targetImg,\n      menu: menu,\n      towerInfo: turretInfo,\n      onClick: e => {\n        if (menu === \"add\") {\n          dispatch(status.actions.setTurret({\n            index: index,\n            turret: selectedTurret,\n            team: team\n          }));\n          dispatch(status.actions.setMenu({\n            menu: \"main\"\n          }));\n        } else {\n          dispatch(status.actions.removeTurret({\n            index: index,\n            team: team\n          }));\n          dispatch(status.actions.setMenu({\n            menu: \"main\"\n          }));\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n_s(Turret, \"fHe2yXVzaV1IXTsGpx4QMvPSH04=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n_c4 = Turret;\nvar _c, _c2, _c3, _c4;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"TurretImage\");\n$RefreshReg$(_c3, \"TargetImage\");\n$RefreshReg$(_c4, \"Turret\");","map":{"version":3,"names":["useDispatch","useSelector","styled","targetImg","selectedTower","status","ally","fieldWidth","useEffect","useRef","rangeCheck","jsxDEV","_jsxDEV","Container","div","props","location","left","bottom","_c","TurretImage","img","deg","_c2","TargetImage","menu","towerInfo","_c3","Turret","team","turretInfo","index","_s","dispatch","selectedTurret","state","fieldUnits","fieldUnit","turretRef","x","current","offsetLeft","y","offsetTop","right","offsetWidth","top","offsetBottom","centerX","console","log","id","Number","range","actions","setMotion","motion","ref","children","undefined","src","require","level","turret","attackMotion","fileName","_jsxFileName","lineNumber","columnNumber","onClick","e","setTurret","setMenu","removeTurret","_c4","$RefreshReg$"],"sources":["/Users/hyeonsulee/MyFolder/BCSD/ageofwar/src/components/turret/Turret.js"],"sourcesContent":["import { useDispatch, useSelector } from \"react-redux\";\nimport { styled } from \"styled-components\";\nimport targetImg from \"../../assets/images/turrets//target.png\"\nimport { selectedTower } from \"../../store/slices/selectedTurret\";\nimport { status } from \"../../store/slices/status\";\nimport { ally, fieldWidth } from \"../../utils/data/dataSet\";\nimport { useEffect, useRef } from \"react\";\nimport { rangeCheck } from \"../../utils/functions/isRange\";\n\nconst Container = styled.div`\n    display: flex;\n    position: absolute;\n    align-items: center;\n    justify-content: center;\n    width: 55px;\n    height: 55px;\n    left: ${props => props.location.left};\n    bottom: ${props => props.location.bottom};\n    z-index: 3;\n`;\nconst TurretImage = styled.img`\n    position: absolute;\n    width: 140px;\n    height: 140px;\n    transform: rotate( ${props => props.deg + \"deg\"});\n`;\nconst TargetImage = styled.img`\n    position: absolute;\n    width: 55px;\n    height: 55px;\n    z-index: 10;\n    &:hover{\n        background-color: rgba(240, 240, 240, 0.5);\n    }\n    display: ${props =>{\n        if(props.menu === \"add\"){\n            if(props.towerInfo === null)\n                return \"block\"\n            else\n                return \"none\"\n        }else if(props.menu === \"cell\"){\n            if(props.towerInfo !== null)\n                return \"block\"\n            else\n                return \"none\"\n        }else{\n            return \"none\"\n        }\n    }};\n`;\n\nexport default function Turret({location, menu, team, turretInfo, index}){\n\n    const dispatch = useDispatch();\n    const selectedTurret = useSelector(state => state.selectedTurret)\n    const fieldUnits = useSelector(state => state.fieldUnit)\n    const turretRef = useRef(null);\n\n    useEffect(() => {\n        \n        if(turretInfo !== null){\n            const location = {\n                x:turretRef.current.offsetLeft,\n                y:turretRef.current.offsetTop,\n                left:turretRef.current.offsetLeft,\n                right:fieldWidth - turretRef.current.offsetLeft - turretRef.current.offsetWidth,\n                top:turretRef.current.offsetTop,\n                bottom:turretRef.current.offsetBottom,\n                centerX:turretRef.current.offsetLeft + turretRef.current.offsetWidth / 2,\n            }\n            console.log(location);\n            if(rangeCheck(fieldUnits, {id:null, location:location}, Number(!team), turretInfo.range) > -1){\n                dispatch(status.actions.setMotion({team:team, index:index, motion:\"공격\"}))\n\n                // 공격일 때 투사체 발사해야하는데 투사체의 애니메이션 좌표를 어떻게 줄것인가....\n                // \n            }else{\n                dispatch(status.actions.setMotion({team:team, index:index, motion:\"대기\"}))\n            }\n        }\n\n    }, [fieldUnits])\n\n    return (\n        <Container ref={turretRef} location={location}>\n            {turretInfo !== null && turretInfo !== undefined ? <TurretImage src={require(\"../../assets/images/turrets/level\" + turretInfo.level + \"/turret\" + turretInfo.turret + \"/\" + turretInfo.attackMotion + \".gif\")}></TurretImage> : <div></div>}\n            <TargetImage src={targetImg} menu={menu} towerInfo={turretInfo} onClick={e => {\n                if(menu === \"add\") {\n                    dispatch(status.actions.setTurret({index:index, turret:selectedTurret, team:team}))\n                    dispatch(status.actions.setMenu({menu:\"main\"}))\n                } else {\n                    dispatch(status.actions.removeTurret({index:index, team:team}))\n                    dispatch(status.actions.setMenu({menu:\"main\"}))\n                }\n            }}></TargetImage>\n        </Container>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}